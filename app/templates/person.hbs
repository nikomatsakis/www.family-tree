{{page-title "Person"}}

<h1>{{@model.name}}</h1>

<p>
    {{@model.comments}}
</p>

<hr>
<h2>Parents, partners, and children</h2>

{{#if @model.childIn}}
<ul>
    <PersonLink @person={{@model.childIn.firstParent}} @pagePerson={{@model}}
        @referencePerson={{this.referencePerson}} />
    {{#each @model.childIn.nextParents as |parent|}}
    +
    <PersonLink @person={{parent}} @pagePerson={{@model}} @referencePerson={{this.referencePerson}} />
    {{/each}}
    <ul>
        <PersonOutline @person={{@model}} @pagePerson={{@model}} @referencePerson={{this.referencePerson}} />
    </ul>
</ul>
{{else}}
<ul>
    <PersonOutline @person={{@model}} @pagePerson={{@model}} @referencePerson={{this.referencePerson}} />
</ul>
{{/if}}

<hr>
{{#if this.isReferencePerson}}
{{@model.name}} is the reference person. Go click on somebody else in <IndexLink
    @referencePerson={{this.referencePerson}}>the tree</IndexLink> to see how they are related to one another.
{{else if this.referencePerson}}
<h2>Relationship to {{this.referencePerson.name}}</h2>

<ul>
    {{#each this.commonAncestralPartnerships as |p|}}
    <PersonOutline @person={{p.firstParent}} @pagePerson={{@model}} @referencePerson={{this.referencePerson}} />
    {{/each}}
</ul>

<MakeReferencePerson @person={{@model}} />
{{else}}
<MakeReferencePerson @person={{@model}} />
{{/if}}

<hr>
<IndexLink @referencePerson={{this.referencePerson}}>Return to the root listing</IndexLink>
{{outlet}}