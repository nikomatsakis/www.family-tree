{{page-title "Person"}}

<h1>{{@model.name}}</h1>

<p>
    {{@model.comments}}
</p>

{{#if this.isReferencePerson}}
{{else if this.referencePerson}}
<hr>
<h2>How is {{@model.name}} related to
    <PersonLink @person={{this.referencePerson}} />?
</h2>
<ul>
    {{#each this.commonAncestralPartnerships as |p|}}
    <PersonOutline @person={{p.firstParent}} @pagePerson={{@model}} @referencePerson={{this.referencePerson}}
        @includeSet={{this.ancestors}} />
    {{/each}}
</ul>
{{/if}}

<hr>
<h2>Parents, partners, and children</h2>

{{#if @model.childIn}}
<ul>
    <PersonLink @person={{@model.childIn.firstParent}} @pagePerson={{@model}}
        @referencePerson={{this.referencePerson}} />
    {{#each @model.childIn.nextParents as |parent|}}
    +
    <PersonLink @person={{parent}} @pagePerson={{@model}} @referencePerson={{this.referencePerson}} />
    {{/each}}
    <ul>
        <PersonOutline @person={{@model}} @pagePerson={{@model}} @referencePerson={{this.referencePerson}} />
    </ul>
</ul>
{{else}}
<ul>
    <PersonOutline @person={{@model}} @pagePerson={{@model}} @referencePerson={{this.referencePerson}} />
</ul>
{{/if}}

<IndexLink @referencePerson={{@model}}>See how {{@model.name}} is related to other people.</IndexLink>

<hr>
<IndexLink @referencePerson={{this.referencePerson}}>Return to the root listing</IndexLink>
{{outlet}}